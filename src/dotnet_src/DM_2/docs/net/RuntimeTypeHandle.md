`RuntimeTypeHandle` –≤ .NET ‚Äî —ç—Ç–æ **—Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∫–∞-–æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ —É–∫–∞–∑–∞—Ç–µ–ª–µ–º –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–∏–ø–∞**, –∫–æ—Ç–æ—Ä—ã–µ CLR —Ö—Ä–∞–Ω–∏—Ç –≤ –ø–∞–º—è—Ç–∏.

–ì–æ–≤–æ—Ä—è –ø—Ä–æ—â–µ: —É –∫–∞–∂–¥–æ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –≤ —Ä–∞–Ω—Ç–∞–π–º–µ –µ—Å—Ç—å —Å–≤–æ–π –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä (`method table` / `EEType` –≤ CLR). `RuntimeTypeHandle` ‚Äî —ç—Ç–æ **—Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π "—Ö–µ–Ω–¥–ª" (—Ä—É—á–∫–∞) –Ω–∞ —ç—Ç—É —Ç–∞–±–ª–∏—Ü—É**.

---

### –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

* –ö–∞–∂–¥—ã–π `System.Type` –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è —Å–æ–¥–µ—Ä–∂–∏—Ç `RuntimeTypeHandle` ‚Üí –∏–º–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ –Ω–µ–≥–æ `Type` –∑–Ω–∞–µ—Ç, –∫–∞–∫–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø –≤ CLR –æ–Ω –æ–ø–∏—Å—ã–≤–∞–µ—Ç.
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö API Reflection –∏ JIT.
* –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é:

  ```csharp
  Type t = typeof(string);
  RuntimeTypeHandle handle = t.TypeHandle;
  Console.WriteLine(handle); // —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ "System.RuntimeTypeHandle"
  ```
* –ò –æ–±—Ä–∞—Ç–Ω–æ:

  ```csharp
  Type t2 = Type.GetTypeFromHandle(handle);
  Console.WriteLine(t2 == typeof(string)); // True
  ```

---

### –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏

* –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ `RuntimeTypeHandle` —Ö—Ä–∞–Ω–∏—Ç **IntPtr**, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π –Ω–∞ `MethodTable` (–≤ CoreCLR) –∏–ª–∏ –∞–Ω–∞–ª–æ–≥ –≤ CoreRT/Mono.
* CLR –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —ç—Ç–æ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å —É–Ω–∏–∫–∞–ª–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤—Å—ë –≤—Ä–µ–º—è, –ø–æ–∫–∞ —Ç–∏–ø –∑–∞–≥—Ä—É–∂–µ–Ω –≤ AppDomain.

---

### –û—Ç–ª–∏—á–∏–µ –æ—Ç `Type`

* `Type` ‚Äî —ç—Ç–æ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –æ–±—ä–µ–∫—Ç .NET, —Å –∫—É—á–µ–π –º–µ—Ç–æ–¥–æ–≤ (`GetMethods`, `GetProperties`, –∏ —Ç.–ø.).
* `RuntimeTypeHandle` ‚Äî –ª—ë–≥–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∫–∞ —Å ¬´—Å—ã—Ä—ã–º¬ª —É–∫–∞–∑–∞—Ç–µ–ª–µ–º.

    * –ú–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –¥–≤–∞ —Ç–∏–ø–∞ (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ö–µ–Ω–¥–ª–æ–≤ ‚Äî –¥–µ—à–µ–≤–ª–µ, —á–µ–º `Type.Equals`).
    * –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω –≤ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–º –∫–æ–¥–µ (—Å–µ—Ä–∏–ª–∏–∑–∞—Ç–æ—Ä—ã, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã –≤—ã—Ä–∞–∂–µ–Ω–∏–π, runtime-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏).

---

### –ü—Ä–∏–º–µ—Ä

```csharp
using System;

class Program
{
    static void Main()
    {
        RuntimeTypeHandle h1 = typeof(int).TypeHandle;
        RuntimeTypeHandle h2 = typeof(string).TypeHandle;

        Console.WriteLine(h1.Equals(h2)); // False

        Type t = Type.GetTypeFromHandle(h1);
        Console.WriteLine(t.FullName); // System.Int32
    }
}
```

---

üëâ –ò—Ç–æ–≥:
`RuntimeTypeHandle` ‚Äî —ç—Ç–æ **—É–ø—Ä–∞–≤–ª—è–µ–º—ã–π –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ CLR –æ —Ç–∏–ø–µ**, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–∞–∫ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–∏–ø–∞. –≠—Ç–æ –±—ã—Å—Ç—Ä—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–± ¬´–ø–æ–¥–µ—Ä–∂–∞—Ç—å –∑–∞ —Ä—É—á–∫—É¬ª —Ä–µ–∞–ª—å–Ω—ã–π runtime-—Ç–∏–ø, –Ω–µ –¥–µ—Ä–∂–∞ —Ç—è–∂—ë–ª—ã–π –æ–±—ä–µ–∫—Ç `Type`.

---

–•–æ—á–µ—à—å, —è –ø–æ–∫–∞–∂—É –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ/IL, –∫–∞–∫ `typeof(T).TypeHandle` —Ä–µ–∞–ª—å–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ `MethodTable` –∏ —á–µ–º —ç—Ç–æ –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ `Type`?
