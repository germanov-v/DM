Ок 👍 Давай разложим работу JIT и понятие "разогретого кода" на этапы.

---

## 🔹 Жизненный цикл метода в .NET с Tiered JIT

```
 ┌────────────────────────────┐
 │   IL-код (CIL в сборке)    │
 └──────────────┬─────────────┘
                │
                ▼
      Первый вызов метода
                │
                ▼
 ┌────────────────────────────┐
 │ Tier0 JIT (быстрая компиляция)
 │  • минимальные оптимизации
 │  • цель: быстрее стартовать
 └──────────────┬─────────────┘
                │
      CLR считает вызовы
                │
   "Метод горячий?" (порог N)
        ┌───────┴─────────┐
        │                 │
        ▼                 ▼
    Нет → остаётся      Да → 
          в tier0         пересборка
                           │
                           ▼
 ┌────────────────────────────┐
 │ Tier1 JIT (оптимизированный код)
 │  • агрессивный inlining
 │  • раскрутка циклов
 │  • удаление bound checks
 │  • использование регистров
 │  • оптимизация хвостовых вызовов
 └────────────────────────────┘
```

---

## 🔹 "Холодный" vs "Разогретый JIT"

* **Холодный JIT** — только что загруженный метод, ещё не JIT-компилирован → при первом вызове будет пауза на компиляцию.
* **Tier0** — быстрый, но не суперэффективный код (стартовый вариант).
* **Разогретый JIT** — метод уже пересобран в **Tier1** и выполняется в максимально оптимизированном виде.

---

## 🔹 Почему это важно

* При старте приложение работает медленнее (tier0).
* Через несколько сотен/тысяч вызовов "горячие" методы пересобираются и начинают работать быстрее.
* Именно поэтому BenchmarkDotNet всегда делает **Warmup** (отбрасывает первые итерации).

---

👉 Простой пример разницы:

```csharp
static int Add(int x, int y) => x + y;

for (int i = 0; i < 1_000_000; i++)
    Add(i, i);
```

* В **tier0**: JIT может оставить вызов `Add` как есть.
* В **tier1**: `Add` скорее всего будет заинлайнен → цикла вызовов фактически не будет, только арифметика.

---

Хочешь, я покажу маленький **демо-бенчмарк** с `Stopwatch`, где видно разницу между "холодным" и "разогретым" JIT для одного метода?
